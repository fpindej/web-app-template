# ══════════════════════════════════════════════════════════════════════════════
#  Environment Variables
# ══════════════════════════════════════════════════════════════════════════════
#
#  These variables configure the application regardless of how you run it.
#  Locally, docker-compose.local.yml reads them from .env automatically.
#  In production, provide them however your tooling expects (Docker, K8s, etc.).
#
#  Local setup:
#    cp .env.example .env        (or let init.sh / init.ps1 do it for you)
#
#  Uncommented variables are used by docker-compose.local.yml directly.
#  Commented-out variables are optional overrides — uncomment and set them
#  when deploying to production or when you need non-default values.
#
#  IMPORTANT: Never commit .env to source control — it is git-ignored.
# ══════════════════════════════════════════════════════════════════════════════

# ── Core ─────────────────────────────────────────────────────────────────────
# ASP.NET runtime environment. Controls config layering and error detail.
# PRODUCTION: set to "Production".
# ASPNETCORE_ENVIRONMENT=Development

# ── Database (PostgreSQL) ────────────────────────────────────────────────────
# Credentials used by both the Postgres container and the API connection string.
# PRODUCTION: use strong, unique credentials.
POSTGRES_USER=admin
POSTGRES_PASSWORD=pwd

# Full connection string override. Locally, docker-compose builds this from
# the variables above. Set this directly when your database host, port, or
# name differs from the local defaults.
# ConnectionStrings__Database=Host=localhost;Port=5432;Database=myapp;Username=admin;Password=pwd

# ── Redis ────────────────────────────────────────────────────────────────────
# PRODUCTION: use a strong, unique password.
REDIS_PASSWORD=redis-dev-password

# Redis host and port. Locally, docker-compose points to the redis container.
# Caching__Redis__ConnectionString=redis:6379

# Enable TLS for the Redis connection.
# PRODUCTION: set to "true" if your Redis instance requires TLS.
# Caching__Redis__UseSsl=false

# ── Authentication (JWT) ─────────────────────────────────────────────────────
# JWT signing key. Must be a long, random string (minimum 32 characters).
# The init script generates one automatically for local dev.
# PRODUCTION: generate a unique secret (e.g. openssl rand -base64 64).
JWT_SECRET_KEY=<generate-a-random-secret-here>

# Token lifetimes. Local defaults are generous for dev convenience.
# PRODUCTION: consider shorter access tokens (e.g. 10-15 minutes).
# Authentication__Jwt__ExpiresInMinutes=100
# Authentication__Jwt__RefreshTokenExpiresInDays=7

# Issuer and audience claims embedded in tokens.
# Defaults are set in appsettings.json — override if your deployment needs
# specific values (e.g. matching your domain).
# Authentication__Jwt__Issuer=MyProjectIssuer
# Authentication__Jwt__Audience=MyProjectAudience

# ── CORS ─────────────────────────────────────────────────────────────────────
# In development, all origins are allowed (set in appsettings.Development.json).
# PRODUCTION: set AllowAllOrigins to false and list your frontend origin(s).
# Cors__AllowAllOrigins=false
# Cors__AllowedOrigins__0=https://your-domain.com

# ── Rate Limiting ────────────────────────────────────────────────────────────
# Global rate limit: max requests per time window, per client.
# Defaults from appsettings.json are suitable for most deployments.
# RateLimiting__Global__PermitLimit=120
# RateLimiting__Global__Window=00:01:00

# ── Logging (Serilog) ───────────────────────────────────────────────────────
# Locally, logs are sent to Seq (configured in docker-compose).
# PRODUCTION: configure sinks via Serilog__WriteTo__* environment variables
# or override the minimum log level.
# Serilog__MinimumLevel__Default=Information
